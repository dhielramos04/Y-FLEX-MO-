<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yoga Mastery - My Progress</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f0fdf4; color: #166534; }
        
        .sidebar { 
            width: 280px; height: 100vh; position: fixed; 
            left: 0; top: 0; background-color: #ffffff; 
            border-right: 1px solid #dcfce7; display: flex; flex-direction: column;
        }

        .main-content { margin-left: 280px; padding: 40px; min-height: 100vh; }

        .nav-item {
            display: flex; align-items: center; padding: 12px 24px;
            margin: 4px 16px; border-radius: 12px; color: #4b5563;
            font-weight: 600; transition: all 0.2s;
        }

        .nav-item:hover { background-color: #f0fdf4; color: #166534; }
        .nav-item.active { background-color: #dcfce7; color: #15803d; }

        .progress-circle {
            transition: stroke-dashoffset 1s ease-in-out;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
    </style>
</head>
<body>

    <aside class="sidebar">
        <div class="p-8">
            <h1 class="text-2xl font-black text-green-800 tracking-tighter">Y-FLEX MO</h1>
        </div>

        <nav class="flex-grow">
            <a href="dashboard.html" class="nav-item">
                <span class="mr-3">üè†</span> Dashboard
            </a>
            <a href="challenge_list.html" class="nav-item">
                <span class="mr-3">üìú</span> Challenges
            </a>
            <a href="progress.html" class="nav-item active">
                <span class="mr-3">üìä</span> My Progress
            </a>
            <a href="rewards.html" class="nav-item">
                <span class="mr-3">üèÜ</span> Rewards
            </a>
        </nav>

        <div class="p-6 border-t border-green-50">
            <a href="#" class="nav-item text-red-500 hover:bg-red-50">
                <span class="mr-3">üö™</span> Logout
            </a>
        </div>
    </aside>

    <main class="main-content">
        <header class="mb-12">
            <h1 class="text-4xl font-black text-green-900 tracking-tight">Performance Tracking</h1>
            <p class="text-green-700 text-lg mt-2 font-medium">Analyze your learning milestones and activity.</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <div class="lg:col-span-1 bg-white p-8 rounded-3xl border border-green-200 shadow-sm flex flex-col items-center justify-center">
                <h3 class="text-lg font-bold text-green-800 mb-6">Course Completion</h3>
                <div class="relative w-48 h-48">
                    <svg class="w-full h-full">
                        <circle cx="96" cy="96" r="88" stroke="#f0fdf4" stroke-width="12" fill="transparent" />
                        <circle id="progress-ring" cx="96" cy="96" r="88" stroke="#16a34a" stroke-width="12" fill="transparent" 
                            stroke-dasharray="552.92" stroke-dashoffset="552.92" class="progress-circle" />
                    </svg>
                    <div class="absolute inset-0 flex flex-col items-center justify-center">
                        <span id="percent-text" class="text-4xl font-black text-green-900">0%</span>
                        <span class="text-[10px] font-bold text-green-600 uppercase">Finished</span>
                    </div>
                </div>
                <p class="mt-6 text-sm text-gray-500 font-medium text-center">Complete all 3 stages to reach 100% Mastery.</p>
            </div>

           <div class="lg:col-span-2 bg-white p-8 rounded-3xl border border-green-200 shadow-sm">
    <h3 class="text-lg font-bold text-green-800 mb-6">Objective Checklist</h3>
    <div class="space-y-6">
        
        <div id="obj-1-container" class="flex items-center p-4 rounded-2xl bg-gray-50 border border-gray-100 opacity-60 transition-all duration-500">
            <div id="obj-1-check" class="w-6 h-6 rounded-full border-2 border-green-300 mr-4 flex items-center justify-center text-xs text-white"></div>
            <div class="flex-grow">
                <p class="font-bold text-gray-700">Foundations & Philosophy</p>
                <p class="text-xs text-green-700">Stage 1: History and Benefits</p>
            </div>
            <span id="obj-1-status" class="text-xs font-black text-green-400 uppercase">Pending</span>
        </div>

        <div id="obj-2-container" class="flex items-center p-4 rounded-2xl bg-gray-50 border border-gray-100 opacity-60 transition-all duration-500">
            <div id="obj-2-check" class="w-6 h-6 rounded-full border-2 border-green-300 mr-4 flex items-center justify-center text-xs text-white"></div>
            <div class="flex-grow">
                <p class="font-bold text-gray-700">Pose Identification</p>
                <p class="text-xs text-green-700">Stage 2: Yoga Types & Flows</p>
            </div>
            <span id="obj-2-status" class="text-xs font-black text-green-400 uppercase">Pending</span>
        </div>

        <div id="obj-3-container" class="flex items-center p-4 rounded-2xl bg-gray-50 border border-gray-100 opacity-60 transition-all duration-500">
            <div id="obj-3-check" class="w-6 h-6 rounded-full border-2 border-green-300 mr-4 flex items-center justify-center text-xs text-white"></div>
            <div class="flex-grow">
                <p class="font-bold text-gray-700">Exercise Execution</p>
                <p class="text-xs text-green-700">Stage 3: Daily Practice</p>
            </div>
            <span id="obj-3-status" class="text-xs font-black text-green-400 uppercase">Pending</span>
        </div>

    </div>
</div>

            <div class="lg:col-span-3 bg-white p-8 rounded-3xl border border-green-200 shadow-sm">
                <h3 class="text-lg font-bold text-green-800 mb-6">XP Gain History</h3>
                <div class="flex items-end justify-between h-40 px-4">
                    <div class="w-12 bg-green-100 rounded-t-lg h-1/4"></div>
                    <div class="w-12 bg-green-100 rounded-t-lg h-1/2"></div>
                    <div class="w-12 bg-green-200 rounded-t-lg h-1/3"></div>
                    <div id="today-bar" class="w-12 bg-green-600 rounded-t-lg h-1/5 transition-all duration-1000"></div>
                    <div class="w-12 bg-gray-100 rounded-t-lg h-5"></div>
                    <div class="w-12 bg-gray-100 rounded-t-lg h-5"></div>
                    <div class="w-12 bg-gray-100 rounded-t-lg h-5"></div>
                </div>
                <div class="flex justify-between mt-4 text-[10px] font-bold text-gray-400 uppercase tracking-widest px-2">
                    <span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span><span>Sun</span>
                </div>
            </div>

        </div>
    </main>

    <script>
    window.onload = function() {
        // 1. Fetch data for all stages
        const s1Done = localStorage.getItem('challenge1_complete') === 'true';
        const s2Done = localStorage.getItem('challenge2_complete') === 'true';
        const s3Done = localStorage.getItem('challenge3_complete') === 'true';
        
        const s1Score = parseInt(localStorage.getItem('challenge1_score')) || 0;
        const s2Score = parseInt(localStorage.getItem('challenge2_score')) || 0;
        const s3Score = parseInt(localStorage.getItem('challenge3_score')) || 0;

        // 2. Calculate Completion Percentage
        const completedCount = [s1Done, s2Done, s3Done].filter(Boolean).length;
        const percent = Math.round((completedCount / 3) * 100);

        // 3. Update Progress Ring
        const ring = document.getElementById('progress-ring');
        const percentText = document.getElementById('percent-text');
        const circumference = 2 * Math.PI * 88;
        const offset = circumference - (percent / 100 * circumference);
        
        ring.style.strokeDashoffset = offset;
        percentText.innerText = percent + "%";

        // 4. Update Objectives Checklist
        updateChecklist(1, s1Done);
        updateChecklist(2, s2Done);
        updateChecklist(3, s3Done);

        // 5. Update XP Chart (Visual representation of total score)
        const totalPoints = (s1Score + s2Score + s3Score);
        const todayBar = document.getElementById('today-bar');
        // Assume 15 points (5 per quiz) is a "full" bar
        const barHeight = Math.min((totalPoints / 15) * 100, 100); 
        todayBar.style.height = barHeight + "%";
    };

    // Helper function to keep code clean
    function updateChecklist(stageNum, isDone) {
    const checkCircle = document.getElementById(`obj-${stageNum}-check`);
    const statusText = document.getElementById(`obj-${stageNum}-status`);
    const container = document.getElementById(`obj-${stageNum}-container`);

    if (isDone && container) {
        // Change visuals to "Achieved" state
        container.classList.remove('opacity-60', 'bg-gray-50');
        container.classList.add('bg-green-50', 'border-green-200');
        
        checkCircle.innerHTML = "‚úì";
        checkCircle.classList.add('bg-green-600', 'border-green-600');
        
        statusText.innerText = "Achieved";
        statusText.classList.replace('text-green-400', 'text-green-600');
        
        // Update title color
        container.querySelector('p.font-bold').classList.replace('text-gray-700', 'text-green-900');
    }
}
</script>
</body>

</html>



